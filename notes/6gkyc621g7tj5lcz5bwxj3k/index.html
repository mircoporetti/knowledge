<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="icon" href="/knowledge/favicon.ico"/><title>Test Driven Development</title><meta name="robots" content="index,follow"/><meta name="googlebot" content="index,follow"/><meta name="description" content="Personal knowledge space"/><meta property="og:title" content="Test Driven Development"/><meta property="og:description" content="Personal knowledge space"/><meta property="og:url" content="https://mircoporetti.me//knowledge/notes/6gkyc621g7tj5lcz5bwxj3k/"/><meta property="og:type" content="article"/><meta property="article:published_time" content="8/28/2022"/><meta property="article:modified_time" content="8/28/2022"/><link rel="canonical" href="https://mircoporetti.me//knowledge/notes/6gkyc621g7tj5lcz5bwxj3k/"/><meta name="next-head-count" content="14"/><link rel="preload" href="/knowledge/_next/static/css/bb496f2571d65214.css" as="style"/><link rel="stylesheet" href="/knowledge/_next/static/css/bb496f2571d65214.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/knowledge/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/knowledge/_next/static/chunks/webpack-f80b29ee15605998.js" defer=""></script><script src="/knowledge/_next/static/chunks/framework-28c999baf2863c3d.js" defer=""></script><script src="/knowledge/_next/static/chunks/main-4f7448d4e6162351.js" defer=""></script><script src="/knowledge/_next/static/chunks/pages/_app-1ced2da6eec33b16.js" defer=""></script><script src="/knowledge/_next/static/chunks/935-4dee79e80b8641c6.js" defer=""></script><script src="/knowledge/_next/static/chunks/6-50972def09142ee2.js" defer=""></script><script src="/knowledge/_next/static/chunks/pages/notes/%5Bid%5D-78d472fa3b924116.js" defer=""></script><script src="/knowledge/_next/static/5019Wp9uPt79TLg8Rpblc/_buildManifest.js" defer=""></script><script src="/knowledge/_next/static/5019Wp9uPt79TLg8Rpblc/_ssgManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><section class="ant-layout" style="width:100%;min-height:100%"><header class="ant-layout-header" style="position:fixed;isolation:isolate;z-index:1;width:100%;border-bottom:1px solid #d4dadf;height:64px;padding:0 24px 0 2px"><div class="ant-row ant-row-center" style="max-width:992px;justify-content:space-between;margin:0 auto"><div style="display:flex" class="ant-col ant-col-xs-20 ant-col-sm-4"></div><div class="ant-col gutter-row ant-col-xs-0 ant-col-sm-20 ant-col-md-20 ant-col-lg-19"><div class="ant-select ant-select-lg ant-select-auto-complete ant-select-single ant-select-allow-clear ant-select-show-search" style="width:100%"><div class="ant-select-selector"><span class="ant-select-selection-search"><input type="search" autoComplete="off" class="ant-select-selection-search-input" role="combobox" aria-haspopup="listbox" aria-owns="undefined_list" aria-autocomplete="list" aria-controls="undefined_list" aria-activedescendant="undefined_list_0" value=""/></span><span class="ant-select-selection-placeholder">For full text search please use the &#x27;?&#x27; prefix. e.g. ? Onboarding</span></div></div></div><div style="display:none;align-items:center;justify-content:center" class="ant-col ant-col-xs-4 ant-col-sm-4 ant-col-md-0 ant-col-lg-0"><span role="img" aria-label="menu" style="font-size:24px" tabindex="-1" class="anticon anticon-menu"><svg viewBox="64 64 896 896" focusable="false" data-icon="menu" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M904 160H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0 624H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0-312H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"></path></svg></span></div></div></header><section class="ant-layout" style="margin-top:64px;display:flex;flex-direction:row"><div class="site-layout-sidebar" style="flex:0 0 auto;width:calc(max((100% - 992px) / 2, 0px) + 200px);min-width:200px;padding-left:calc((100% - 992px) / 2)"><aside class="ant-layout-sider ant-layout-sider-dark" style="position:fixed;overflow:auto;height:calc(100vh - 64px);background-color:transparent;flex:0 0 200px;max-width:200px;min-width:200px;width:200px"><div class="ant-layout-sider-children"></div></aside></div><main class="ant-layout-content side-layout-main" style="max-width:1200px;min-width:0;display:block"><div style="padding:0 24px"><div class="main-content" role="main"><div class="ant-row"><div class="ant-col ant-col-24"><div class="ant-row" style="margin-left:-10px;margin-right:-10px"><div style="padding-left:10px;padding-right:10px" class="ant-col ant-col-xs-24 ant-col-md-18"><div><h1 id="test-driven-development"><a aria-hidden="true" class="anchor-heading" href="#test-driven-development"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Test Driven Development</h1>
<p>XP approach for driving the development by testing with the goal of clean and simple design.
With TDD the focus is on the requirements. It’s about design and development, not simply testing or coverage.</p>
<p>TDD != Test First -> TDD is an iterative process based on needs not on already thought solutionsProcess:</p>
<ul>
<li>RED: Write a test that fails</li>
<li>GREEN: Create the minimum code to make it pass</li>
<li>REFACTOR: Remove duplication and improve your code without changing its behavior</li>
</ul>
<p>TDD lets the design emerging exploring a problem iteratively and incrementally.
It is a tool that gives us feedback on the quality of the design.
If the tests are difficult to write, the design is probably poor.</p>
<h2 id="how-tests-should-be"><a aria-hidden="true" class="anchor-heading" href="#how-tests-should-be"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>How tests should be</h2>
<ul>
<li>Tests express intent</li>
<li>Focus on business requirements</li>
<li>Tests not coupled with production code</li>
<li>Tests should be easy to understand</li>
<li>One problem for every broken test (TDD by Example) -> rewrite tests that are coupled and that can be broken for the same reason -> design!</li>
</ul>
<h2 id="outside-in-or-inside-out"><a aria-hidden="true" class="anchor-heading" href="#outside-in-or-inside-out"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Outside in or Inside out</h2>
<p>Choose a test that teach you something valuable and that you are able to write (TDD by Example).Start from the most obscure and valuable part of the problem.
It’s not a fixed rule but a general suggestion. Personally I usually go outside in and then I jump into more detailed tests based on the complexity of the problem but it happens that I start from inside if I recognize that there is a clear aspect of the problem that is more complex or interesting.</p>
<h2 id="suggestions"><a aria-hidden="true" class="anchor-heading" href="#suggestions"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Suggestions</h2>
<p>Start from a todo list of requirements -> tests
Not implement new tests for a new class but a new test for a new requirement.Tests the exported stable module, not every single class (they are details and will change frequently)
Stay simple. Be ready for new requirements</p>
<p>When code is simple? (XP Explained)</p>
<ul>
<li>All tests green</li>
<li>Express intent</li>
<li>No duplication</li>
<li>With minimum number of elements.</li>
</ul>
<h2 id="mocks"><a aria-hidden="true" class="anchor-heading" href="#mocks"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Mocks</h2>
<p>Mocks are a powerful tool used for controlling the behavior of a component inside your test.They are helpful in some situation but they can be abused and become a smell.
When the test is full of mocks probably the design is poor. If I think about the reasons I recognize mainly 2 scenarios:</p>
<ul>
<li>Even if you practice TDD you can fall into the trap of thinking about the structure of the classes before or while writing the test. This is a common mistake and I think that 99% of devs experience at some point especially at the start of the TDD learning process;	</li>
<li>Mocks are often a way to be able to write tests on an already existing poor design without spending time on		refactoring.
If you focus on requirements and not on classes when writing tests, likely you will tend to mock less. Mock boundaries if needed!</li>
</ul>
<h2 id="thoughts"><a aria-hidden="true" class="anchor-heading" href="#thoughts"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Thoughts</h2>
<p>TDD HELPS/DRIVE you in building a simple design but at the end YOU are the responsible of good or bad design.
You need design knowledge especially for refactoring to really achieve simple design.
Even if you don’t use TDD as your “go to” approach, having some experience with it will help you in making better design decision when you have to do that in your daily work.
It will helps you in recognizing smells when you need to write tests for an existing code because if the design is bad the tests will be difficult to write (and vice versa).</p>
<h3 id="references"><a aria-hidden="true" class="anchor-heading" href="#references"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>References:</h3>
<p><a href="https://blog.cleancoder.com/uncle-bob/2017/03/03/TDD-Harms-Architecture.html#:~:text=Yes!,architecture%20%E2%80%93%20TDD%20or%20no%20TDD">Clean Coder - TDD Harms Architecture</a></p>
<p><a href="https://blog.cleancoder.com/uncle-bob/2014/05/10/WhenToMock.html">Clean Coder - When to Mock</a></p>
<p>TDD by Example</p>
<p>XP Explained</p></div></div><div style="padding-left:10px;padding-right:10px" class="ant-col ant-col-xs-0 ant-col-md-6"><div><div class=""><div class="ant-anchor-wrapper dendron-toc" style="max-height:calc(100vh - 64px);z-index:1"><div class="ant-anchor"><div class="ant-anchor-ink"><span class="ant-anchor-ink-ball"></span></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#how-tests-should-be" title="How tests should be">How tests should be</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#outside-in-or-inside-out" title="Outside in or Inside out">Outside in or Inside out</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#suggestions" title="Suggestions">Suggestions</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#mocks" title="Mocks">Mocks</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#thoughts" title="Thoughts">Thoughts</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#references" title="References:">References:</a></div></div></div></div></div></div></div></div></div></div></div><div class="ant-divider ant-divider-horizontal" role="separator"></div><footer class="ant-layout-footer" style="padding:0 24px 24px"></footer></main></section></section></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"note":{"id":"6gkyc621g7tj5lcz5bwxj3k","title":"Test Driven Development","desc":"","updated":1661683695761,"created":1661682581014,"custom":{},"fname":"it.software_development.TDD","type":"note","vault":{"fsPath":"vault"},"contentHash":"82584b498185eb0a125995a72312f998","links":[],"anchors":{"how-tests-should-be":{"type":"header","text":"How tests should be","value":"how-tests-should-be","line":20,"column":0,"depth":2},"outside-in-or-inside-out":{"type":"header","text":"Outside in or Inside out","value":"outside-in-or-inside-out","line":27,"column":0,"depth":2},"suggestions":{"type":"header","text":"Suggestions","value":"suggestions","line":31,"column":0,"depth":2},"mocks":{"type":"header","text":"Mocks","value":"mocks","line":42,"column":0,"depth":2},"thoughts":{"type":"header","text":"Thoughts","value":"thoughts","line":49,"column":0,"depth":2},"references":{"type":"header","text":"References:","value":"references","line":55,"column":0,"depth":3}},"children":[],"parent":"1twbbzg1kdp16xz54xfnkpq","data":{}},"body":"\u003ch1 id=\"test-driven-development\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#test-driven-development\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eTest Driven Development\u003c/h1\u003e\n\u003cp\u003eXP approach for driving the development by testing with the goal of clean and simple design.\nWith TDD the focus is on the requirements. It’s about design and development, not simply testing or coverage.\u003c/p\u003e\n\u003cp\u003eTDD != Test First -\u003e TDD is an iterative process based on needs not on already thought solutionsProcess:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eRED: Write a test that fails\u003c/li\u003e\n\u003cli\u003eGREEN: Create the minimum code to make it pass\u003c/li\u003e\n\u003cli\u003eREFACTOR: Remove duplication and improve your code without changing its behavior\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eTDD lets the design emerging exploring a problem iteratively and incrementally.\nIt is a tool that gives us feedback on the quality of the design.\nIf the tests are difficult to write, the design is probably poor.\u003c/p\u003e\n\u003ch2 id=\"how-tests-should-be\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#how-tests-should-be\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eHow tests should be\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eTests express intent\u003c/li\u003e\n\u003cli\u003eFocus on business requirements\u003c/li\u003e\n\u003cli\u003eTests not coupled with production code\u003c/li\u003e\n\u003cli\u003eTests should be easy to understand\u003c/li\u003e\n\u003cli\u003eOne problem for every broken test (TDD by Example) -\u003e rewrite tests that are coupled and that can be broken for the same reason -\u003e design!\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"outside-in-or-inside-out\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#outside-in-or-inside-out\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eOutside in or Inside out\u003c/h2\u003e\n\u003cp\u003eChoose a test that teach you something valuable and that you are able to write (TDD by Example).Start from the most obscure and valuable part of the problem.\nIt’s not a fixed rule but a general suggestion. Personally I usually go outside in and then I jump into more detailed tests based on the complexity of the problem but it happens that I start from inside if I recognize that there is a clear aspect of the problem that is more complex or interesting.\u003c/p\u003e\n\u003ch2 id=\"suggestions\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#suggestions\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eSuggestions\u003c/h2\u003e\n\u003cp\u003eStart from a todo list of requirements -\u003e tests\nNot implement new tests for a new class but a new test for a new requirement.Tests the exported stable module, not every single class (they are details and will change frequently)\nStay simple. Be ready for new requirements\u003c/p\u003e\n\u003cp\u003eWhen code is simple? (XP Explained)\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eAll tests green\u003c/li\u003e\n\u003cli\u003eExpress intent\u003c/li\u003e\n\u003cli\u003eNo duplication\u003c/li\u003e\n\u003cli\u003eWith minimum number of elements.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"mocks\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#mocks\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eMocks\u003c/h2\u003e\n\u003cp\u003eMocks are a powerful tool used for controlling the behavior of a component inside your test.They are helpful in some situation but they can be abused and become a smell.\nWhen the test is full of mocks probably the design is poor. If I think about the reasons I recognize mainly 2 scenarios:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eEven if you practice TDD you can fall into the trap of thinking about the structure of the classes before or while writing the test. This is a common mistake and I think that 99% of devs experience at some point especially at the start of the TDD learning process;\t\u003c/li\u003e\n\u003cli\u003eMocks are often a way to be able to write tests on an already existing poor design without spending time on\t\trefactoring.\nIf you focus on requirements and not on classes when writing tests, likely you will tend to mock less. Mock boundaries if needed!\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"thoughts\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#thoughts\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eThoughts\u003c/h2\u003e\n\u003cp\u003eTDD HELPS/DRIVE you in building a simple design but at the end YOU are the responsible of good or bad design.\nYou need design knowledge especially for refactoring to really achieve simple design.\nEven if you don’t use TDD as your “go to” approach, having some experience with it will help you in making better design decision when you have to do that in your daily work.\nIt will helps you in recognizing smells when you need to write tests for an existing code because if the design is bad the tests will be difficult to write (and vice versa).\u003c/p\u003e\n\u003ch3 id=\"references\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#references\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eReferences:\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"https://blog.cleancoder.com/uncle-bob/2017/03/03/TDD-Harms-Architecture.html#:~:text=Yes!,architecture%20%E2%80%93%20TDD%20or%20no%20TDD\"\u003eClean Coder - TDD Harms Architecture\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://blog.cleancoder.com/uncle-bob/2014/05/10/WhenToMock.html\"\u003eClean Coder - When to Mock\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eTDD by Example\u003c/p\u003e\n\u003cp\u003eXP Explained\u003c/p\u003e","noteIndex":{"id":"wn8PE1RhG0znK1alrGFYv","title":"Knowledge","desc":"","updated":1653052058421,"created":1631901573363,"custom":{"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":"vault"},"contentHash":"b500019acb88c6ee12fd13841e186668","links":[],"anchors":{},"children":["427tmwxym406ososu8y3vl8","qlyp13dhorqnejqy9t6koun","vha3f8oqcnooj9rrefcz88i","csjmam5oumdqjppy11zlce8"],"parent":null,"data":{},"body":"\n"},"collectionChildren":null,"customHeadContent":null,"config":{"version":5,"dev":{"enablePreviewV2":true},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":false,"leaveTrace":false,"bubbleUpCreateNew":true,"fuzzThreshold":0.2,"vaultSelectionModeOnCreate":"smart"}},"insertNote":{"initialValue":"templates"},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"randomNote":{},"copyNoteLink":{"aliasMode":"title"},"templateHierarchy":"template"},"workspace":{"vaults":[{"fsPath":"vault"}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"graph":{"zoomSpeed":1,"createStub":false},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":true,"maxPreviewsCached":10,"maxNoteLength":204800,"task":{"name":"","dateFormat":"","addBehavior":"childOfCurrent","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link","taskCompleteStatus":["done","x"]},"enableUserTags":true,"enableHashTags":true,"dendronVersion":"0.95.0","enableEditorDecorations":true,"enableHandlebarTemplates":true,"enableFullHierarchyNoteTitle":false},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enableMermaid":true,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false,"enableFrontmatterTags":true,"enableHashesForFMTags":false},"publishing":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enableMermaid":true,"enablePrettyRefs":true,"enableKatex":true,"assetsPrefix":"/knowledge","copyAssets":true,"siteHierarchies":["root"],"enableSiteLastModified":false,"siteRootDir":"docs","siteUrl":"https://mircoporetti.me/","enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableRandomlyColoredTags":true,"duplicateNoteBehavior":{"action":"useVault","payload":["vault"]},"writeStubs":false,"seo":{"title":"Dendron","description":"Personal knowledge space"},"github":{"enableEditLink":true,"editLinkText":"Edit this page on GitHub","editBranch":"main","editViewMode":"tree"},"enablePrettyLinks":true,"enableTaskNotes":true,"siteFaviconPath":"favicon.ico","siteIndex":"root","searchMode":"lookup"}}},"__N_SSG":true},"page":"/notes/[id]","query":{"id":"6gkyc621g7tj5lcz5bwxj3k"},"buildId":"5019Wp9uPt79TLg8Rpblc","assetPrefix":"/knowledge","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>